<Window x:Class="CommentSharedPlaylist.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding Title}" Height="350" Width="525"
        DataContext="{Binding MainViewModel, Source={StaticResource ViewModelLocator}}" WindowStyle="ToolWindow" ShowInTaskbar="True" WindowStartupLocation="CenterScreen">


    <TreeView x:Name="treeView" ItemsSource="{Binding CollaborativePlaylists}">
        <TreeView.ItemTemplate>
            <DataTemplate>
                <TreeViewItem Header="{Binding Name}" ItemsSource="{Binding Tracks.PlaylistTracks}">
                    <TreeViewItem.ItemTemplate>
                        <DataTemplate>
                            <TreeViewItem Header="{Binding Track.FullTrackName}" Margin="0,6">
                                <TreeViewItem.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="[Add Comment]" Tag="{Binding Track}" Click="addCommentForTrack" />
                                    </ContextMenu>
                                </TreeViewItem.ContextMenu>

                                <ListView  ItemsSource="{Binding Track.Comments}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Vertical">
                                                <TextBlock Text="{Binding Username}" FontWeight="Bold" FontSize="14"/>
                                                <TextBlock Text="{Binding Comment}" FontWeight="Medium" FontSize="12"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </TreeViewItem>
                        </DataTemplate>
                    </TreeViewItem.ItemTemplate>
                </TreeViewItem>
            </DataTemplate>
        </TreeView.ItemTemplate>

    </TreeView>
</Window>
